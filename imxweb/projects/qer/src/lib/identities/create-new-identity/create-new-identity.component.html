<div eui-sidesheet-content>
  <mat-card>
    <form class="imx-form" [formGroup]="identityForm">
      
      <mat-accordion>
        <mat-expansion-panel  data-imx-identifier="create-new-identity-expansion-unique" [expanded]="true" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Identificación del usuario
            </mat-panel-title>
          </mat-expansion-panel-header>
          <imx-cdr-editor *ngFor="let cdr of cdrListusuario" [cdr]="cdr" (readOnlyChanged)=update(cdr,cdrListusuario)
          (valueChange)="checkValues(cdr.column.ColumnName)" (controlCreated)="identityForm.addControl(cdr.column.ColumnName, $event)"> </imx-cdr-editor>
          <eui-alert class="imx-info" *ngIf="mailIsOff>0" type="warning" condensed="true" [colored]="true">
            <div class="imx-flex-alert">
              <div>
                <p translate>#LDS#There is at least one identity with the same email address.</p>
                <p translate>#LDS#You can view these identities, change the email address, or proceed.</p>
              </div>
              <button mat-button color="primary" data-imx-identifier="create-new-identity-button-duplicated-mail" class="imx-alert-button" (click)="showDuplicates('mail')">
                {{'#LDS#View identities' |translate}}
              </button>
            </div>
          </eui-alert>        
        </mat-expansion-panel>
        
        <mat-expansion-panel  data-imx-identifier="create-new-identity-expansion-organisation" >
          <mat-expansion-panel-header>
            <mat-panel-title>
              Información personal y organizativa
            </mat-panel-title>
          </mat-expansion-panel-header>
          <imx-cdr-editor *ngFor="let cdr of cdrListPersonal" [cdr]="cdr" (readOnlyChanged)=update(cdr,cdrListPersonal)
          (valueChange)="checkValues(cdr.column.ColumnName)" (controlCreated)="identityForm.addControl(cdr.column.ColumnName, $event)"> </imx-cdr-editor>
          <eui-alert class="imx-info" *ngIf="mailIsOff>0" type="warning" condensed="true" [colored]="true">
            <div class="imx-flex-alert">
              <div>
                <p translate>#LDS#There is at least one identity with the same email address.</p>
                <p translate>#LDS#You can view these identities, change the email address, or proceed.</p>
              </div>
              <button mat-button color="primary" data-imx-identifier="create-new-identity-button-duplicated-mail" class="imx-alert-button" (click)="showDuplicates('mail')">
                {{'#LDS#View identities' |translate}}
              </button>
            </div>
          </eui-alert>        
        </mat-expansion-panel>
        
      
      
      
      </mat-accordion>
    </form>
  </mat-card>
</div>
<div eui-sidesheet-actions >
  <button data-imx-identifier="create-new-identity-button-save" (click)="submit()"
    [disabled]="accountIsOff || identityForm.invalid || !identityForm.dirty" mat-raised-button type="button"
    color="primary">
    {{ '#LDS#Create' | translate }}
  </button>
</div>
