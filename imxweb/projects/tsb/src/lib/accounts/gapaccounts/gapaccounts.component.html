<mat-card class="data-explorer data-explorer--accounts">
  <div class="data-explorer-card-header">
    <div class="data-explorer-card-header-bg">
      <span translate>#LDS#Cuentas de correo</span>
      <imx-help-contextual [contextId]="contextId"></imx-help-contextual>
    </div>
  </div>
    <imx-data-source-toolbar #dst
      [settings]="dstSettings"
      [options]="['search', 'sort']"
      [busyService]="busyService"
      [searchBoxText]="'#LDS#Search' | translate"
      (navigationStateChanged)="onNavigationStateChanged($event)"
      (filterTreeSelectionChanged)="filterByTree($event)"
      (search)="onSearch($event)"
      (customSelectedFilterRemoved)="dataExplorerFilters.onCustomFilterClearedExternally($event)"
      (updateConfig)="updateConfig($event)" (deleteConfigById)="deleteConfigById($event)">      
    </imx-data-source-toolbar>       
    <div class="imx-data-explorer-content">
      <div class="data-explorer-table">
        <imx-data-table [dst]="dst" (highlightedEntityChanged)="onAccountChanged($event)" detailViewVisible="false"  mode="manual">
          
          <imx-data-table-column width="300px" [entityColumn]="entitySchemaGAPAccount?.Columns.PrimaryEmail">
            <ng-template let-item>
              <div [style.max-width]="'300px'" class="imx-ellipse-column">{{item.GetEntity().GetColumn("PrimaryEmail").GetDisplayValue()}}</div>
            </ng-template>
          </imx-data-table-column>                   
          <imx-data-table-column width="400px" [entityColumn]="entitySchemaGAPAccount?.Columns.UID_Person">
            <ng-template let-item>
              <div [style.max-width]="'400px'" class="imx-ellipse-column">{{item.GetEntity().GetColumn("UID_Person").GetDisplayValue()}}</div>
            </ng-template>
          </imx-data-table-column>
          <imx-data-table-generic-column columnName="CCC_EspacioMb" columnLabel="Ocupación (Gb)">
            <ng-template let-item>
              <div  [style.max-width]="'500px'" class="imx-ellipse-column">{{item.GetEntity().entityData.Columns.CCC_EspacioMb.Value / 1024 | number:'1.0-0'}}</div>
            </ng-template>
          </imx-data-table-generic-column>
          
          <imx-data-table-generic-column columnName="CCC_LicenciaWorkspace" columnLabel="Licencia Asignada">
            <ng-template let-item>
              <div  [style.max-width]="'500px'" class="imx-ellipse-column">{{item.GetEntity().entityData.Columns.CCC_LicenciaWorkspace.Value}}</div>
            </ng-template>
          </imx-data-table-generic-column>
          
          <imx-data-table-generic-column  width="500px" columnName="CreationTime" columnLabel="Fecha de creación">
            <ng-template let-item>
              <div  [style.max-width]="'500px'" class="imx-ellipse-column">{{item.GetEntity().entityData.Columns.CreationTime.Value | date: 'dd-MM-yyyy'}}</div>
            </ng-template>
          </imx-data-table-generic-column>
          
          <imx-data-table-generic-column width="500px" columnName="CCC_UltimaConexion" columnLabel="Ultimo acceso">
            <ng-template let-item>
              <div [style.max-width]="'500px'" class="imx-ellipse-column">{{item.GetEntity().entityData.Columns.CCC_UltimaConexion.Value | date: 'dd-MM-yyyy'}}</div>
            </ng-template>
          </imx-data-table-generic-column>
        </imx-data-table>
        <imx-data-source-paginator [dst]="dst"></imx-data-source-paginator>
    </div>
  </div>
</mat-card>


<div *ngIf="this.esAdminEPR" class="wrapper">
<eui-alert type="info" condensed="true" [colored]="true">
    <span>
    Licencias Adquiridas/Actuales -> 
    Enterprise: {{GAPLicenciasActuales.EnterpriseStarter}}/{{GAPLicenciasActuales.StockEnterpriseStarter}}
    , Frontline: {{GAPLicenciasActuales.FrontlineStarter}}/{{GAPLicenciasActuales.StockFrontlineStarter}}
    , BPluss: {{GAPLicenciasActuales.BusinessPlus}}/{{GAPLicenciasActuales.StockBusinessPlus}}
    , BStandard: {{GAPLicenciasActuales.BusinessStandard}}/{{GAPLicenciasActuales.StockBusinessStandard}}
  </span>  
</eui-alert>
</div>

  <div  class="data-explorer-bottom-button-row"> 
    
    <button  *ngIf="(this.esAdminPersonas) && (this.opcioneslic.length > 0) " mat-raised-button color="primary" data-imx-identifier="identities-button-create-new-identity" (click)="createNewIdentity()" class="imx-right-button">
      <eui-icon icon="add"></eui-icon>
      <span translate>#LDS#Nueva Cuenta</span>
    </button>
    
  </div>

  